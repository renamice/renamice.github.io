<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Password Generator: Backend | rena</title>
<meta name=keywords content="Actix,API,Backend,Rust"><meta name=description content="A simple multithreaded password generator backend api in rust."><meta name=author content="Rena Mice"><link rel=canonical href=https://renamice.github.io/posts/password-generator-backend/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://renamice.github.io/assets/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://renamice.github.io/assets/favicon/favicon16x16.png><link rel=icon type=image/png sizes=32x32 href=https://renamice.github.io/assets/favicon/favicon32x32.png><link rel=apple-touch-icon href=https://renamice.github.io/assets/favicon/apple_touch_icon.png><link rel=mask-icon href=https://renamice.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://renamice.github.io/posts/password-generator-backend/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://renamice.github.io/posts/password-generator-backend/"><meta property="og:site_name" content="rena"><meta property="og:title" content="Password Generator: Backend"><meta property="og:description" content="A simple multithreaded password generator backend api in rust."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-07T14:18:12+05:45"><meta property="article:modified_time" content="2024-07-07T14:18:12+05:45"><meta property="article:tag" content="Actix"><meta property="article:tag" content="API"><meta property="article:tag" content="Backend"><meta property="article:tag" content="Rust"><meta name=twitter:card content="summary"><meta name=twitter:title content="Password Generator: Backend"><meta name=twitter:description content="A simple multithreaded password generator backend api in rust."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://renamice.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Password Generator: Backend","item":"https://renamice.github.io/posts/password-generator-backend/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Password Generator: Backend","name":"Password Generator: Backend","description":"A simple multithreaded password generator backend api in rust.","keywords":["Actix","API","Backend","Rust"],"articleBody":"For quite a while now, I wanted to learn Rust. I tried the online book, but I haven’t finished it till now, instead, after learning what I thought to be enough basics, I recreated my old terminal program into this web-based API just to see if I can use it or not.\nRust actually provides a code snippet for this in their cookbook. There is even a crate for this exact purpose, and their code snippet is far better than mine. Mine looks horrendous and I am just happy that it is working; I did this only for learning purpose.\nMy implementation utilizes multithreading in hopes that it will generate “random” passwords randomly.\nThis is only the backend of the Password Generator project. I have no idea regarding the frontend of this thing.\nThe Foundation Starting off, I created a git branch password_generator-experimental. Here I put together the foundation for this project. The functionality responsible for generating passwords was all in a single file.\nThe rand crate is the core of this project.\nuse rand::Rng; use rand::seq::SliceRandom; This is the structure that I ended up using to make things easier:\nstruct Set { characters: String, length: u32, } impl Set { /// Creates a new Set. fn new(characters: String, length: u32) -\u003e Set { Set { characters: characters, length: length } } } This function, as the name suggests, is responsible for creating password, this function envokes another function, retreive, discussed below.\nfn create_pass(length: u32, put_numbers: bool, put_symbols: bool) -\u003e String { // lower and upper cases are by default let lower_alphabets = String::from(\"abcdefghijklmnopqrstuvwxyz\"); let upper_alphabets = String::from(\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"); let numbers = String::from(\"0123456789\"); let symbols = String::from(\"!\u0026\\\";#$%\u0026'()*+,-./:;\u003c=\u003e?@[\\\\]^_`{|}~\"); let mut options = vec![ Set::new(lower_alphabets, 26), Set::new(upper_alphabets, 26), ]; if put_numbers { options.push(Set::new(numbers, 10)); } if put_symbols { options.push(Set::new(symbols, 34)); } let mut password = String::from(\"\"); for _i in 1..length { let set: \u0026Set = options.choose(\u0026mut rand::thread_rng()).unwrap(); let character: char = retreive(set); password.push_str(\u0026character.to_string()); } return password; } This function uses the rand crate to generate two things:\nAn index for the character set. A boolean. It chooses the generated index if and only if the boolean is true, if the boolean is generated false, it discards that index and chooses a index. fn retreive(character_set: \u0026Set) -\u003e char { // returns the character at a random index let index = rand::thread_rng().gen_range(0..character_set.length); let mut choice: char = ' '; loop { let mut count: u32 = 1; for element in character_set.characters.chars() { if count == index { choice = element; break; } count += 1; } // decied weather to choose the currently selected item or not let choose: bool = rand::random(); if choose == true { return choice; } } } Multithreading After the base functionality was working, I created another branch multithread and implementd multithreading.\nThe only reason I did that was because I wanted to increase the randomness while generating a string of random characters.\nI used the standard library for this feature:\nuse std::{ sync::{Arc, Mutex}, thread, }; The only functionality affected on this addition was the retreive function.\nThe function now generated the random index and the random boolean at the same time in two different threads. My idea is that, even though the random module’s randomness might be psudo-random, the processing of threads is sure to be random, it isn’t clear which thread might complete first, so by doing this, I hoped to increase the randomness.\nfn retreive(character_set: \u0026Set) -\u003e char { let set = \u0026character_set.characters; let length: u32 = character_set.length; let index = Arc::new(Mutex::new(0)); let choice = Arc::new(Mutex::new(false)); loop { let index_clone = Arc::clone(\u0026index); let choice_clone = Arc::clone(\u0026choice); let choosing = thread::spawn( move || { let num = rand::thread_rng().gen_range(0..=length); let mut value = index_clone.lock().unwrap(); *value = num; }); let deciding = thread::spawn( move || { let choose: bool = rand::random(); let mut value = choice_clone.lock().unwrap(); *value = choose; }); choosing.join().unwrap(); deciding.join().unwrap(); let index = *index.lock().unwrap(); let choice = *choice.lock().unwrap(); if choice { return itereate(set, index); } } } The function ended up getting to long, so I created another function for the selection of the chosen index’s item.\nfn itereate(list: \u0026String, index: u32) -\u003e char { let mut count: u32 = 0; let mut element: char = ' '; for item in list.chars() { element = item; if count == index { break; } count += 1; } return element; } It also might be worth noting that: while testing, the function would sometimes return empty char as initaliazed.\nI didn’t know why this was the case so I decided to update the value of element in each itteration, thus, making sure that it wouldn’t return any empty char. I still have no idea, however, on why it was returning the char as initialized in the first place.\nIntegrating into web I was initially not sure weather to use Actix Web or Rocket.\nAnd after not so much thorough research, I just went with actix since it looked cooler. Since, it was my first time doing anything with rust and actix, it took me a fairely long time to get this initial setup up and running.\nI created a new struct for handling the incomming get request.\nuse serde::Deserialize; #[derive(Debug, Deserialize)] struct Selections { length: Option\u003cusize\u003e, put_numbers: Option\u003cbool\u003e, put_symbols: Option\u003cbool\u003e, } I created two functions for the handling of requests:\nFor handling an empty request. For handling a request with certain selections. #[get(\"/\")] async fn hello() -\u003e impl Responder { let password: String = create_pass(30, true, true); HttpResponse::Ok().body(password) } #[get(\"/config\")] async fn config(params: web::Query\u003cSelections\u003e) -\u003e impl Responder { handle_selections(params).await } async fn handle_selections(params: web::Query\u003cSelections\u003e) -\u003e impl Responder { let length = params.length.unwrap_or(16) as u32; let put_numbers = params.put_numbers.unwrap_or(false); let put_symbols = params.put_symbols.unwrap_or(false); let password: String = create_pass(length, put_numbers, put_symbols); HttpResponse::Ok().json(password) } Refactoring After I confirmed both of it’s functionality to be working correctly, I started to refactor the code. I distrubuted all the things into a new file structure that I thought to be “good-enough”.\\\n/src |--api/ | |--handlers.rs // endpoints | |--models.rs // structure for deserializing get request. | |--routes.rs // routes | |--mod.rs |--utils/ | |--generate_password.rs // the core feature | |--mod.rs |--main.rs This is my initial API project and my first properly functioning backend application too.\nThus, I lack any depth into this file structure as being viable for large applications or not.\nI challenged myself to finish this from start till end in a single day, and since this was not that much complex of a project, I did in fact complete this within 24-hours. Another reason for the time limit was that, my friend Sulav Gautam had asked if I had been doing any projects recently. Not wanting to admit that I was lazing around, I decided to whip this quick project up.\nEven though this was a small project, I feel like I have learned quite a lot, at least way more than just reading the book. There were multiple times where I felt like just throwing this whole thing in the trash but ego one hell of a motivator.\n","wordCount":"1168","inLanguage":"en","datePublished":"2024-07-07T14:18:12+05:45","dateModified":"2024-07-07T14:18:12+05:45","author":{"@type":"Person","name":"Rena Mice"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://renamice.github.io/posts/password-generator-backend/"},"publisher":{"@type":"Organization","name":"rena","logo":{"@type":"ImageObject","url":"https://renamice.github.io/assets/favicon/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://renamice.github.io/ accesskey=h title="rena (Alt + H)">rena</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://renamice.github.io/archive/ title=Archive><span>Archive</span></a></li><li><a href=https://renamice.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://renamice.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://renamice.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Password Generator: Backend</h1><div class=post-description>A simple multithreaded password generator backend api in rust.</div><div class=post-meta><span title='2024-07-07 14:18:12 +0545 +0545'>July 7, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1168 words&nbsp;·&nbsp;Rena Mice</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#the-foundation>The Foundation</a></li><li><a href=#multithreading>Multithreading</a></li><li><a href=#integrating-into-web>Integrating into web</a></li><li><a href=#refactoring>Refactoring</a></li></ul></nav></div></details></div><div class=post-content><p>For quite a while now, I wanted to learn Rust. I tried the online book, but I haven&rsquo;t finished it till now, instead, after learning what I thought to be enough basics, I recreated my old terminal program into this web-based API just to see if I can use it or not.</p><p>Rust actually provides a <a href=https://rust-lang-nursery.github.io/rust-cookbook/algorithms/randomness.html#create-random-passwords-from-a-set-of-alphanumeric-characters>code snippet</a> for this in their <a href=https://rust-lang-nursery.github.io/rust-cookbook/intro.html>cookbook</a>. There is even a <a href=https://docs.rs/passwords/latest/passwords/>crate</a> for this exact purpose, and their code snippet is far better than mine. Mine looks horrendous and I am just happy that it is working; I did this only for learning purpose.</p><p>My implementation utilizes multithreading in hopes that it will generate &ldquo;random&rdquo; passwords randomly.</p><p>This is only the backend of the <a href=https://github.com/renamice/Password-Generator>Password Generator</a> project.
I have no idea regarding the frontend of this thing.</p><hr><h2 id=the-foundation>The Foundation<a hidden class=anchor aria-hidden=true href=#the-foundation>#</a></h2><p>Starting off, I created a git branch <code>password_generator-experimental</code>. Here I put together the foundation for this project. The functionality responsible for generating passwords was all in a single file.</p><p>The <code>rand</code> crate is the core of this project.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> rand::Rng;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> rand::seq::SliceRandom;
</span></span></code></pre></div><p>This is the structure that I ended up using to make things easier:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Set</span> {
</span></span><span style=display:flex><span>    characters: String,
</span></span><span style=display:flex><span>    length: <span style=color:#66d9ef>u32</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Set {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>/// Creates a new Set.
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>new</span>(characters: String, length: <span style=color:#66d9ef>u32</span>) -&gt; <span style=color:#a6e22e>Set</span> {
</span></span><span style=display:flex><span>        Set { characters: <span style=color:#a6e22e>characters</span>, length: <span style=color:#a6e22e>length</span> }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This function, as the name suggests, is responsible for creating password, this function envokes another function, <code>retreive</code>, discussed below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>create_pass</span>(length: <span style=color:#66d9ef>u32</span>, put_numbers: <span style=color:#66d9ef>bool</span>, put_symbols: <span style=color:#66d9ef>bool</span>) -&gt; String {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// lower and upper cases are by default
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> lower_alphabets <span style=color:#f92672>=</span> String::from(<span style=color:#e6db74>&#34;abcdefghijklmnopqrstuvwxyz&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> upper_alphabets <span style=color:#f92672>=</span> String::from(<span style=color:#e6db74>&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> numbers <span style=color:#f92672>=</span> String::from(<span style=color:#e6db74>&#34;0123456789&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> symbols <span style=color:#f92672>=</span> String::from(<span style=color:#e6db74>&#34;!&amp;</span><span style=color:#ae81ff>\&#34;</span><span style=color:#e6db74>;#$%&amp;&#39;()*+,-./:;&lt;=&gt;?@[</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>]^_`{|}~&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> options <span style=color:#f92672>=</span> vec![
</span></span><span style=display:flex><span>        Set::new(lower_alphabets, <span style=color:#ae81ff>26</span>),
</span></span><span style=display:flex><span>        Set::new(upper_alphabets, <span style=color:#ae81ff>26</span>),
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> put_numbers {
</span></span><span style=display:flex><span>        options.push(Set::new(numbers, <span style=color:#ae81ff>10</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> put_symbols {
</span></span><span style=display:flex><span>        options.push(Set::new(symbols, <span style=color:#ae81ff>34</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> password <span style=color:#f92672>=</span> String::from(<span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> _i <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>..</span>length {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> set: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Set</span> <span style=color:#f92672>=</span> options.choose(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>mut</span> rand::thread_rng()).unwrap();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> character: <span style=color:#66d9ef>char</span> <span style=color:#f92672>=</span> retreive(set);
</span></span><span style=display:flex><span>        password.push_str(<span style=color:#f92672>&amp;</span>character.to_string());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> password;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This function uses the <code>rand</code> crate to generate two things:</p><ol><li>An index for the character set.</li><li>A boolean.
It chooses the generated index if and only if the boolean is true, if the boolean is generated false, it discards that index and chooses a index.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>retreive</span>(character_set: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Set</span>) -&gt; <span style=color:#66d9ef>char</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// returns the character at a random index
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> index <span style=color:#f92672>=</span> rand::thread_rng().gen_range(<span style=color:#ae81ff>0</span><span style=color:#f92672>..</span>character_set.length);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> choice: <span style=color:#66d9ef>char</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39; &#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>loop</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> count: <span style=color:#66d9ef>u32</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> element <span style=color:#66d9ef>in</span> character_set.characters.chars() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> count <span style=color:#f92672>==</span> index {
</span></span><span style=display:flex><span>                choice <span style=color:#f92672>=</span> element;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// decied weather to choose the currently selected item or not
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> choose: <span style=color:#66d9ef>bool</span> <span style=color:#f92672>=</span> rand::random();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> choose <span style=color:#f92672>==</span> <span style=color:#66d9ef>true</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> choice;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=multithreading>Multithreading<a hidden class=anchor aria-hidden=true href=#multithreading>#</a></h2><p>After the base functionality was working, I created another branch <code>multithread</code> and implementd multithreading.<br>The only reason I did that was because I wanted to increase the randomness while generating a string of random characters.</p><p>I used the standard library for this feature:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::{
</span></span><span style=display:flex><span>    sync::{Arc, Mutex},
</span></span><span style=display:flex><span>    thread,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>The only functionality affected on this addition was the <code>retreive</code> function.<br>The function now generated the random index and the random boolean at the same time in two different threads. My idea is that, even though the random module&rsquo;s randomness might be psudo-random, the processing of threads is sure to be random, it isn&rsquo;t clear which thread might complete first, so by doing this, I hoped to increase the randomness.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>retreive</span>(character_set: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>Set</span>) -&gt; <span style=color:#66d9ef>char</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> set <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>character_set.characters;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> length: <span style=color:#66d9ef>u32</span> <span style=color:#f92672>=</span> character_set.length;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> index <span style=color:#f92672>=</span> Arc::new(Mutex::new(<span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> choice <span style=color:#f92672>=</span> Arc::new(Mutex::new(<span style=color:#66d9ef>false</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>loop</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> index_clone <span style=color:#f92672>=</span> Arc::clone(<span style=color:#f92672>&amp;</span>index);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> choice_clone <span style=color:#f92672>=</span> Arc::clone(<span style=color:#f92672>&amp;</span>choice);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> choosing <span style=color:#f92672>=</span> thread::spawn( <span style=color:#66d9ef>move</span> <span style=color:#f92672>||</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> num <span style=color:#f92672>=</span> rand::thread_rng().gen_range(<span style=color:#ae81ff>0</span><span style=color:#f92672>..=</span>length);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> value <span style=color:#f92672>=</span> index_clone.lock().unwrap();
</span></span><span style=display:flex><span>            <span style=color:#f92672>*</span>value <span style=color:#f92672>=</span> num;
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> deciding <span style=color:#f92672>=</span> thread::spawn( <span style=color:#66d9ef>move</span> <span style=color:#f92672>||</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> choose: <span style=color:#66d9ef>bool</span> <span style=color:#f92672>=</span> rand::random();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> value <span style=color:#f92672>=</span> choice_clone.lock().unwrap();
</span></span><span style=display:flex><span>            <span style=color:#f92672>*</span>value <span style=color:#f92672>=</span> choose;
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        choosing.join().unwrap();
</span></span><span style=display:flex><span>        deciding.join().unwrap();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> index <span style=color:#f92672>=</span> <span style=color:#f92672>*</span>index.lock().unwrap();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> choice <span style=color:#f92672>=</span> <span style=color:#f92672>*</span>choice.lock().unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> choice {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> itereate(set, index);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The function ended up getting to long, so I created another function for the selection of the chosen index&rsquo;s item.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>itereate</span>(list: <span style=color:#66d9ef>&amp;</span>String, index: <span style=color:#66d9ef>u32</span>) -&gt; <span style=color:#66d9ef>char</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> count: <span style=color:#66d9ef>u32</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> element: <span style=color:#66d9ef>char</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39; &#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> list.chars() {
</span></span><span style=display:flex><span>        element <span style=color:#f92672>=</span> item;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> count <span style=color:#f92672>==</span> index { <span style=color:#66d9ef>break</span>; }
</span></span><span style=display:flex><span>        count <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> element;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><em>It also might be worth noting that: while testing, the function would sometimes return empty <code>char</code> as initaliazed.<br>I didn&rsquo;t know why this was the case so I decided to update the value of <code>element</code> in each itteration, thus, making sure that it wouldn&rsquo;t return any empty <code>char</code>.
I still have no idea, however, on why it was returning the <code>char</code> as initialized in the first place.</em></p><hr><h2 id=integrating-into-web>Integrating into web<a hidden class=anchor aria-hidden=true href=#integrating-into-web>#</a></h2><p>I was initially not sure weather to use <a href=https://actix.rs/>Actix Web</a> or <a href=https://rocket.rs/>Rocket</a>.<br>And after not so much thorough research, I just went with actix since it looked cooler. Since, it was my first time doing anything with rust and actix, it took me a fairely long time to get this initial setup up and running.</p><p>I created a new <code>struct</code> for handling the incomming <code>get</code> request.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> serde::Deserialize;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[derive(Debug, Deserialize)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Selections</span> {
</span></span><span style=display:flex><span>    length: Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>usize</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>    put_numbers: Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>bool</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>    put_symbols: Option<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>bool</span><span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I created two functions for the handling of requests:</p><ol><li>For handling an empty request.</li><li>For handling a request with certain selections.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[get(</span><span style=color:#e6db74>&#34;/&#34;</span><span style=color:#75715e>)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>hello</span>() -&gt; <span style=color:#a6e22e>impl</span> Responder {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> password: String <span style=color:#f92672>=</span> create_pass(<span style=color:#ae81ff>30</span>, <span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    HttpResponse::Ok().body(password)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[get(</span><span style=color:#e6db74>&#34;/config&#34;</span><span style=color:#75715e>)]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>config</span>(params: <span style=color:#a6e22e>web</span>::Query<span style=color:#f92672>&lt;</span>Selections<span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#a6e22e>impl</span> Responder {
</span></span><span style=display:flex><span>  handle_selections(params).<span style=color:#66d9ef>await</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>handle_selections</span>(params: <span style=color:#a6e22e>web</span>::Query<span style=color:#f92672>&lt;</span>Selections<span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#a6e22e>impl</span> Responder {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> length <span style=color:#f92672>=</span> params.length.unwrap_or(<span style=color:#ae81ff>16</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>u32</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> put_numbers <span style=color:#f92672>=</span> params.put_numbers.unwrap_or(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> put_symbols <span style=color:#f92672>=</span> params.put_symbols.unwrap_or(<span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> password: String <span style=color:#f92672>=</span> create_pass(length, put_numbers, put_symbols);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  HttpResponse::Ok().json(password)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=refactoring>Refactoring<a hidden class=anchor aria-hidden=true href=#refactoring>#</a></h2><p>After I confirmed both of it&rsquo;s functionality to be working correctly, I started to refactor the code.
I distrubuted all the things into a new file structure that I thought to be &ldquo;good-enough&rdquo;.\</p><pre tabindex=0><code>/src
|--api/
|  |--handlers.rs            // endpoints
|  |--models.rs              // structure for deserializing get request. 
|  |--routes.rs              // routes
|  |--mod.rs
|--utils/
|  |--generate_password.rs   // the core feature
|  |--mod.rs
|--main.rs
</code></pre><p><em>This is my initial API project and my first properly functioning backend application too.<br>Thus, I lack any depth into this file structure as being viable for large applications or not.</em></p><hr><p>I challenged myself to finish this from start till end in a single day, and since this was not that much complex of a project, I did in fact complete this within 24-hours.
Another reason for the time limit was that, my friend <a href=https://sulavgautam.vercel.app/>Sulav Gautam</a> had asked if I had been doing any projects recently. Not wanting to admit that I was lazing around, I decided to whip this quick project up.</p><p>Even though this was a small project, I feel like I have learned quite a lot, at least way more than just reading the book. There were multiple times where I felt like just throwing this whole thing in the trash but ego one hell of a motivator.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://renamice.github.io/tags/actix/>Actix</a></li><li><a href=https://renamice.github.io/tags/api/>API</a></li><li><a href=https://renamice.github.io/tags/backend/>Backend</a></li><li><a href=https://renamice.github.io/tags/rust/>Rust</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://renamice.github.io/>rena</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>